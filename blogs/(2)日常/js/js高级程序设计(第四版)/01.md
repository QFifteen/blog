# 一、前言

红宝书(《JavaScript高级程序设计》第四版)学习笔记，做一个前端所应有的学习。涉及范围： 

- 第一章：什么是JavaScript
- 第二章：HTML中的JavaScript
- **第三章：语言基础**

# 二、JavaScript认识

## 2.1 了解

1995年，`JavaScript`问世。从简单的输入验证到强大的编程语言，`JavaScript`的崛起为我们带来了机遇。了解其**本质**、**历史**、及**局限性**很重要。

关键词：网景公司、微软、Web浏览器领域、ECMAScript

> JavaScript之父：Brendan Eich

![img](https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic2.zhimg.com%2F50%2Fv2-24b942cae60667fd094834eb8ba9798f_hd.jpg&refer=http%3A%2F%2Fpic2.zhimg.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1659078667&t=5c3b2ea9a227d5e3562bbba777b24cd8)

## 2.2 初步

完整JavaScript包括以下几个部分：

- 核心(ECMAScript)
- 文档对象模型(DOM)
- 浏览器对象模型(BOM)

### 2.2.1 DOM 

文档对象模型 `DOM`将整个页面抽象为一组分层节点。HTML页面的每个组成部分都是一种节点，包含不同的数据。

```html
<html>
    <head>
        <title>Hello</title>
    </head>
    <body>
        <p>
            World
        </p>
    </body>
</html>

html
  - head
	- title
	  - Hello
  - body
	 - p
	  - World
```



`DOM`通过创建文档树，让开发者随心所欲控制网页内容和结构，使用DOM.API可以轻松地删除、添加、替换、修改节点。



### 2.2.2 BOM

浏览器对象模型API，用于支持访问和操作浏览器的窗口。使用BOM，开发者可以操控浏览器显示页面之外的部分。

### 2.2.3 小结语

js是一门用来与网页交互的脚本语言。js的三大组成部分在`IE`、`Firefox(火狐)`、`Safari(苹果浏览器)`、`Chrome(谷歌)`、`Opera(欧朋浏览器)`得到了不同程度支持。



# 三、Script标签

JavaScript插入到HTML中，主要方法是使用`<script>`元素，有八个属性：

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script src="index.js"></script>
    <script>
        //从上往下

        //<script>标签可接受的属性
        // 1.async：表示应该立即开始下载脚本。只对外部脚本文件有效
        // 2.charset：代码字符集
        // 3.crossorigin：配置相关请求的CORS
        // 4.defer：在文档解析和显示完成后再执行脚本。只对外部脚本文件有效。推迟到文档渲染完毕后再执行
        // 5.integrity：可确保CDN不会提供恶意内容
        // 6.language：废弃
        // 7.src：要执行代码的外部文件
        /* 8.type：代替language，表示代码块中脚本语言的内容类型，一般text/javascript。
        当值为module时，代码会被当做ES6模块，可以出现import和export*/
    </script>

    
    <!-- <script src="www.baidu.com">
        在解析这个资源时，会向src属性指定的路径发送一个Get请求，以取得资源
    </script> -->
</body>
</html>
```



`<script>`标签通常会放在`<body>`元素的后面，是为了让页面先渲染。在js代码处理之前，先渲染页面，给用户体验更好。



# 四、语言基础

## 4.1 了解

- js语法很大程度借鉴了C语言和其他类C语言，如`Java`

- **js中一切都区分大小写**
- 标识符(变量名)，推荐使用驼峰大小写形式，首字母小写，后面每个单词的首字母大写，如`firstSecond`、`myCar`
- 注释与C语言风格一致，单行注释：`//`、多行注释：`/**/`
- 严格模式，在脚本开头加入`"use strict"`
- 语句以分号结尾。虽不是必需，但为了规范，应该加上
- 最好不要使用保留的关键字和保留字作为变量名和属性名

## 4.2 变量

js变量是松散类型(弱类型)，**变量可以用于保存任何类型的数据**。3个关键词：`var`、`let`、`const`，

`var`在所有版本可用，`let`和`const`在ES6及更晚版本可用。



### 4.2.1 var

定义变量，用`var`操作符

```js
var name; //定义了一个名为name的变量，变量的值是undefined

//可以改变值的类型
var name = "十五"; //值类型是"字符串"
name = 15; //变为 数字
```



定义多个变量，用逗号分隔每个变量：

```js
var message = "十五",
    age = 18,
    found = false;
```

`var`也可以重复声明

```js
var name = "十五";
var name = "十六";
console.log(name); //十六
```



**(1) var变量提升**

js的引擎会获取所有被声明的变量，然后将其提升到头部运行，这叫做**变量提升**



代码的模样：

```js
console.log(name);
var name = "十五";
```

这里，js引擎将 `name` 这个变量提升到头部，然后输出 `log`，会显示 `undefined`。然后下一步再进行赋值。代码的实际是：

```js
var name;
console.log(name); //undefined
name = "十五";
```



或者

```js
function test(){
    console.log(name);
    var name = "十五";
}
test(); //undefined
```

实际编译后，代码是这样：

```js
function test(){
    var name;//变量提升到函数顶部
    console.log(name); //undefined
    name = "十五";
}
```



> ES6的let和const是块级作用域，不存在变量提升

### 4.2.2 let 声明

`let`和`var`作用差不多，区别在于`let`声明的范围是块级作用域。`var`声明的范围是函数作用域

**块级作用域，即只可作用于当前范围，在这之外的范围，将不存在**

```js
if(true){
    let me = 15; //只存在于当前作用域
    console.log(me);//15
}
console.log(me);//me 未定义
```

同时，`let`在**同一块作用域**中不允许重复声明，在不同或嵌套的块作用域中，相同的声明是不会报错的。

```js
let age = 15;
if(true){
    let age = 20;
    console.log(age); //20
}
```



注意，与`var`的变量提升不同的，`let`不存在变量提升，而是存在**暂时性死区**。上面这段代码改变位置：

```js
if(true){
    console.log(age); //ReferenceError: Cannot access 'age' before initialization
    let age = 20;
}
```

`age`并未被定义，在`let age = 20`声明之前，都存在暂时性死区，会抛出`ReferenceError`。



**`for`循环的`let`声明**

在使用`var`来定义的变量进行循环时，迭代定义的变量会渗透到这个循环的外部

```js
for(var i = 0; i < 5; i++) {
    setTimeout(() => console.log(i), 0); //这是宏任务，会最后运行
}
// 5、5、5、5、5
//导致退出循环的是 i = 5，i = 5 不满足继续运行的条件;
//当循环体退出时，这时i的值是5，var的变量提升会让i一直等于5。
//所以在执行到setTimeout时，会一直输出5

for(let i = 0; i < 5; i++) {
    setTimeout(() => console.log(i), 0);
}
//0、1、2、3、4
//使用let，引擎每次都给一个新的迭代变量，每个setTimeout引用的都是不同的变量实例。
```



### 4.2.3 const 声明

`const`的行为与`let`基本相同，也是块级作用域、拥有暂时性死区，并且不允许重复声明。一个区别是用`const`声明变量时，必须同时初始化变量，也就是必须给赋值，且这个值一般是常量，不允许改变

> 虽然说不允许改变，是指向的地址不允许改变，比如`const obj = { name:""十五, age: 15 }`
>
> 可以改变`obj`的属性，但这个对象本身是不可变的。

`cosnt`一般用来声明常量。

```js
const name = "十五"; //不允许改变
```



`for`循环中不能用`const`来声明迭代变量，因为它会一直变化，自增。除非是声明一个不会被修改的`const`变量



### 4.2.4 风格与小结

>怪异的`var`!!!!!!!!!!

使用`let`和`const`有助于提高代码质量。推荐风格：

- 尽量不使用`var`，限制只使用`let`、`const`
- `const`优先，`let`次之

# 五、 数据类型

- `js`总有 8 种数据类型，分别是 

  1. `string`：字符串类型，如文本`hello`
  2. `number`：数字类型，`1`
  3. `boolean`：布尔类型，如`true`和`false`
  4. `undefined`：未定义的，无任何值
  5. `null`：表示空值，一般用在`object`对象上
  6. `symbol`：独一无二的值，是ES6新增的数据类型
  7. `object`：对象类型，是复杂数据类型
  8. `bigint`：大整数类型

  除去`bigint`，前六种称为简单数据类型(原始类型)，`object`是复杂类型。

  

  `object`是复杂数据类型，分为

  - 狭义对象(object)
  - 数组(array)
  - 函数(function)

>数组是特殊的对象



## 5.1 typeof 操作符

`js`有三种方法，可以确定一个值到底是什么类型

- `typeof`运算符
- `instanceof`运算符
- `Object.prototype.toString`方法



`typeof`返回一个值的数据类型

```js
typeof 15; //number
typeof "15"; //string
typeof true; //boolean

function f(){}
typeof f; //function

typeof null; //object 历史原因造成
typeof window; //object
typeof {} // "object"
typeof [] // "object"
```



## 5.2 undefined和null、boolean

### 1. undefined 类型

使用`var`或`let`声明了变量且并没有赋值时，变量为`undefined`。

> 不必显式的去给变量设置`undefined`值

```js
if(!undefined){
    //....会执行
}
if(undefined){
    //....不会执行
}
```



### 2.Null类型
